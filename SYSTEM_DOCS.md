
# 智慧办公空间管理系统 (SmartOffice) - 需求说明书及操作手册

## 1. 系统概述
智慧办公空间管理系统（SmartOffice）是一款面向现代化企业的物理资源管理平台。系统集成了会议室预订、工位申请、多级审批流程自定义、组织架构管理以及基于 Gemini AI 的智能选址建议。

### 1.1 系统核心价值
- **透明化**：实时展示空间占用情况，消除资源冲突。
- **自动化**：自定义审批流，实现申请-审批闭环。
- **智能化**：利用 AI 推荐最匹配业务需求的办公空间。
- **高效化**：支持成员与资产的批量导入导出及管理。

---

## 2. 角色定义与权限
系统预设三种核心角色，支持权限集的灵活扩展：

| 角色 | 权限描述 |
| :--- | :--- |
| **系统管理员 (SYSTEM_ADMIN)** | 拥有最高权限。包括：组织架构管理、角色定义、审批流程配置、数据备份与重置、全量数据导入。 |
| **审批负责人 (APPROVAL_ADMIN)** | 负责业务层面的审核。可访问“审批工作台”进行单据的核准或驳回。 |
| **正式员工 (EMPLOYEE)** | 基础使用者。拥有资源查询、预约申请、查看个人申请记录及流程轨迹的权限。 |

---

## 3. 功能模块说明

### 3.1 数据全景看板 (Dashboard)
- **实时统计**：直观展示资源总量、空闲会议室/工位数量及待办审批任务。
- **今日动态时间轴**：以 8:00 - 20:00 为维度，展示各资源在当天的预订分布。
- **月度占用网格**：前瞻性展示未来 30 天内所有资源的预订密度，支持按周翻页。

### 3.2 空间资源库 (Resource Library)
- **列表视图**：展示名称、位置、容量、状态等核心信息。
- **工位日历视图**（新增）：针对工位类型资源，提供月度可用性日历，用户可点击空白日期直接发起预约。
- **AI 智能建议**：在预约弹窗中，输入预约用途后点击“AI 建议”按钮，系统将调用 Gemini 引擎分析并推荐最合适的资源。
- **批量操作**：支持批量删除资源或批量修改资源状态（如设为维护中）。

### 3.3 成员中心 (Member Center)
- **名录管理**：管理员工姓名、邮箱、部门及角色。
- **批量角色分配**：支持选中多名成员后一键指派特定系统角色。

### 3.4 批量导入功能 (Batch Import)
- **CSV 模板导入**：支持成员和资源库的批量入库。
- **数据校验**：系统自动验证必填项（如姓名、邮箱、资源名称）并实时反馈解析错误。
- **操作路径**：成员中心/资源库 -> 顶部“批量导入”按钮。

### 3.5 审批中心 (Approval Center)
- **待办任务**：审批人可查看待处理申请的详细信息、申请理由及流转轨迹。
- **驳回机制**：支持填写驳回理由，驳回后申请人可查看到相关反馈。

### 3.6 系统管理 (System Admin)
- **流程配置**：可视化调整审批节点顺序及负责角色。
- **组织架构**：树形结构维护部门层级，支持增删改及收起/展开。
- **数据中心**：提供 JSON 格式的全量数据导出备份及一键系统重置功能。

---

## 4. 操作手册

### 4.1 员工如何预约会议室/工位？
1. 进入“空间资源库”。
2. **方法 A**：在列表点击“预约”按钮。
3. **方法 B**（仅限工位）：点击“日历”图标，在弹出的月度视图中寻找空白日期点击。
4. 在弹窗中选择起止时间、填写用途（建议填写详细以便 AI 推荐）。
5. 点击“立即申请”，单据将进入审批流。

### 4.2 管理员如何批量录入员工？
1. 进入“成员中心”，点击右上角“批量导入”。
2. 点击“下载标准 CSV 模板”。
3. 按照格式填写员工信息（姓名,邮箱,部门,角色）。
4. 将内容粘贴至输入框，或直接上传 CSV 文件。
5. 点击“开始导入”，数据将实时更新至名录。

### 4.3 如何修改审批流程？
1. 切换至“流程配置”页面。
2. 点击“新增节点”添加阶段。
3. 使用节点右侧的 **↑/↓** 箭头调整审批顺序。
4. 修改节点关联的负责角色（如将“行政预审”交由“行政部”角色处理）。

### 4.4 如何处理时间冲突？
- **自动检测**：当用户提交预约时，系统会自动扫描该资源在此时段内是否存在已核准或审批中的单据。
- **冲突提示**：若存在冲突，系统会弹出“预约时间冲突”警告，并展示该资源当天的已有排期，引导用户避开高峰。

---

## 5. 技术方案备注
- **存储方案**：基于浏览器 `LocalStorage` 实现持久化存储，无需服务器即可运行。
- **AI 服务**：集成 `@google/genai` (Gemini-3-Flash)，实时分析非结构化文本。
- **前端架构**：React 19 + Tailwind CSS + Lucide Icons。
- **响应式支持**：适配桌面及平板设备。
